#N canvas 126 125 1063 642 12;
#X obj 227 326 dac~;
#X floatatom 346 250 5 0 0 0 - #0-stretch -, f 5;
#X floatatom 453 251 5 0 0 0 - #0-transpose -, f 5;
#X obj 606 381 hsl 256 25 0.025 40 1 1 \$0-stretch \$0-instretch empty
-2 -8 0 10 -262144 -1 -1 12750 1;
#X obj 606 491 hsl 256 25 -24 24 0 1 \$0-dtranspose empty empty -2
-8 0 10 -262144 -1 -1 12750 1;
#X msg 834 361 1;
#X msg 834 471 0;
#X msg 138 152 1;
#X msg 158 178 0;
#X obj 453 318 bng 25 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 250 154 2;
#X text 601 358 stretch ratio: [0.025 \, 40.];
#X text 288 155 trigger;
#X text 195 180 pause;
#X text 23 506 Note: beware of high stretch ratios \, which require
higher cpu usage.;
#X text 396 316 end of file, f 6;
#N canvas 350 150 1009 617 stress-tests 0;
#X floatatom 117 210 5 0 0 0 - - -, f 5;
#X floatatom 226 211 5 0 0 0 - - -, f 5;
#X obj 226 180 r \$0-transpose;
#X obj 117 180 r \$0-stretch;
#X msg 59 124 1;
#X msg 59 148 0;
#X msg 239 143 2;
#X msg 202 81 open movie.mov \, 2, f 20;
#X text 277 145 trigger;
#X text 96 124 play;
#X text 96 150 pause;
#X msg 435 84 open;
#X msg 435 109 open /dev/null;
#X msg 340 371 2;
#X obj 343 317 bang;
#X obj 768 211 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 645 182 metro 20;
#X obj 715 189 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 697 157 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 627 157 metro 5;
#X msg 435 157 open compressed.m4a \, 2;
#X msg 435 213 open movie.wav \, open movie.mov \, 1 \, 0 \, 2 \, open
movie.mov \, open sad.wav \, 1 \, 2 \, open movie.mov \, 0 \, 1, f
40;
#X msg 435 134 open /dev/null \, 1;
#X obj 338 345 del 100;
#X msg 202 48 open compressed.m4a;
#N canvas 386 276 693 468 switching 0;
#X obj 58 293 outlet~;
#X floatatom 117 210 5 0 0 0 - - -, f 5;
#X floatatom 226 211 5 0 0 0 - - -, f 5;
#X obj 226 180 r \$0-transpose;
#X obj 117 180 r \$0-stretch;
#X msg 59 124 1;
#X msg 59 148 0;
#X msg 239 144 2;
#X msg 202 81 open movie.mov \, 2, f 20;
#X text 277 145 trigger;
#X text 96 124 play;
#X text 96 150 pause;
#X msg 201 16 open /usr/share/puredata/doc/sound/voice.wav \, 2;
#X msg 202 48 open compressed.m4a;
#X msg 448 83 set 4096 1 1;
#X msg 448 138 set 4096 2 1;
#X msg 448 109 set 8192 1 1;
#X msg 451 168 set 4096 1 0.5;
#X msg 451 195 set 4096 1 2;
#X obj 407 260 switch~ 64 1 1;
#X obj 59 240 aubiosampler~;
#X connect 1 0 20 1;
#X connect 2 0 20 2;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 5 0 20 0;
#X connect 6 0 20 0;
#X connect 7 0 20 0;
#X connect 8 0 20 0;
#X connect 12 0 20 0;
#X connect 13 0 20 0;
#X connect 14 0 19 0;
#X connect 20 0 0 0;
#X restore 775 359 pd switching;
#X obj 786 411 dac~;
#X obj 54 314 dac~;
#X msg 111 444 open https://aubio.org/sounds/black_milk_montreux.mp3
\, 2;
#X msg 125 475 open https://stream13.mixcloud.com/c/m4a/64/8/3/e/5/108f-9b6d-4826-833e-96bb1a530ef9.m4a
\, 2, f 73;
#X msg 123 539 open https://r4---sn-h5q7dne6.googlevideo.com/videoplayback?lmt=1464141204304837&expire=1475852247&ipbits=0&mime=audio%2Fwebm&nh=IgpwcjAyLm1hZDA2KgkxMjcuMC4wLjE&clen=3494754&initcwndbps=972500&requiressl=yes&mt=1475830229&pl=19&source=youtube&dur=212.041&keepalive=yes&mv=m&gcr=es&ms=au&ei=d2P3V-eiHpOVWqjruegI&id=o-AC7Etn5AhGmdv2AHIwER3e4ecCsqLOkH382r1iEauSR8&mn=sn-h5q7dne6&mm=31&key=yt6&ip=90.163.55.20&gir=yes&upn=-NxI05kytyE&sparams=clen%2Cdur%2Cei%2Cgcr%2Cgir%2Cid%2Cinitcwndbps%2Cip%2Cipbits%2Citag%2Ckeepalive%2Clmt%2Cmime%2Cmm%2Cmn%2Cms%2Cmv%2Cnh%2Cpl%2Crequiressl%2Csource%2Cupn%2Cexpire&itag=251&signature=D6E78814DCA9527EE49F396F922818ED67E77F3C.7A8AD6AB2A48FC3715B8AD47851BFC8AC1C753F3&ratebypass=yes
\, 1, f 80;
#X obj 4 196 r opencmds;
#X text 734 469 open remote streams (urls from youtube and more can
be extracted with `youtube-dl -g`), f 22;
#X obj 98 743 s opencmds;
#X obj 435 389 s opencmds;
#X text 737 85 - open empty;
#X text 737 107 - open wrong file;
#X text 737 129 - open and play wrong file;
#X text 736 153 - flood with open \, play;
#X text 733 330 TODO: get subpatch blocksize;
#X text 843 210 - crazy flood;
#X text 629 274 - start after a fixed delay \, no warning, f 41;
#X text 627 295 - show a warning if fixed delay too short;
#X text 579 440 TODO: fix crashes on network errors;
#X msg 435 184 open voice2.wav \, 1 \, 0 \, 2;
#X text 736 176 - more flood with transport;
#X text 734 51 tests-----, f 5;
#X msg 240 721 open https://aubio.org/sounds/drum.ogg \, 2 \, 3;
#X obj 717 720 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 627 727 metro 44;
#X msg 201 16 open /usr/share/puredata/doc/sound/voice.wav \, 1;
#X msg 562 359 open /tmp/drum.wav \, 2 \, 3;
#X obj 29 403 s opencmds;
#X msg 213 121 3;
#X msg 49 350 open test_sine.wav \, 2 \, 3;
#X msg 435 272 open compressed.m4a \, 0;
#X msg 435 296 open movie.mov \, 0, f 20;
#X msg 206 279 2 \, 3;
#X msg 283 232 2 \, 3;
#X obj 767 234 metro 4;
#X obj 59 240 aubiosampler~;
#X obj 153 319 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 129 377 open /tmp/drum.wav \, 2 \, 3;
#X msg 359 223 seek 1.2e+07 \, 1 \, 3;
#X connect 0 0 60 1;
#X connect 1 0 60 2;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 60 0;
#X connect 5 0 60 0;
#X connect 6 0 60 0;
#X connect 7 0 60 0;
#X connect 11 0 34 0;
#X connect 12 0 34 0;
#X connect 13 0 34 0;
#X connect 14 0 23 0;
#X connect 15 0 59 0;
#X connect 16 0 44 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 34 0;
#X connect 21 0 34 0;
#X connect 22 0 34 0;
#X connect 23 0 13 0;
#X connect 24 0 60 0;
#X connect 25 0 26 0;
#X connect 25 0 26 1;
#X connect 28 0 33 0;
#X connect 29 0 33 0;
#X connect 30 0 33 0;
#X connect 31 0 60 0;
#X connect 44 0 34 0;
#X connect 47 0 33 0;
#X connect 48 0 49 0;
#X connect 49 0 47 0;
#X connect 50 0 60 0;
#X connect 51 0 34 0;
#X connect 53 0 60 0;
#X connect 54 0 52 0;
#X connect 55 0 14 0;
#X connect 55 0 34 0;
#X connect 56 0 14 0;
#X connect 56 0 34 0;
#X connect 57 0 60 0;
#X connect 58 0 60 0;
#X connect 59 0 21 0;
#X connect 60 0 27 0;
#X connect 60 1 61 0;
#X connect 62 0 52 0;
#X connect 63 0 60 0;
#X restore 803 553 pd stress-tests;
#N canvas 79 418 575 349 more-stretch-tools 0;
#N canvas 1 199 450 300 stretch2bpm 0;
#X obj 127 72 inlet;
#X obj 127 116 * 100;
#X obj 127 185 outlet;
#X obj 127 150 - 100;
#X obj 203 80 t b f;
#X obj 203 47 r \$0-bpmref;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 4 1 1 1;
#X connect 4 1 3 1;
#X connect 5 0 4 0;
#X restore 23 89 pd stretch2bpm;
#X obj 23 59 r \$0-stretch;
#N canvas 1 265 450 300 bpm2stretch 0;
#X obj 127 72 inlet;
#X obj 127 185 outlet;
#X obj 203 80 t b f;
#X obj 127 116 + 100;
#X obj 127 150 / 100;
#X obj 203 52 r \$0-bpmref;
#X connect 0 0 3 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 2 1 4 1;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X restore 176 152 pd bpm2stretch;
#X text 175 34 set bpm change;
#X msg 326 52 100;
#X msg 339 77 120;
#N canvas 1 89 450 456 tap 0;
#X obj 105 40 t b b;
#X obj 105 69 timer;
#X obj 66 182 f;
#X obj 132 193 +;
#X obj 165 166 * 0.25;
#X obj 66 212 * 0.75;
#X obj 91 124 t b f;
#X obj 105 95 moses 1000;
#X obj 132 326 outlet;
#X obj 105 10 inlet;
#X obj 161 295 /;
#X msg 129 262 60000;
#X obj 129 226 t b f;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 1 0 7 0;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 3 0 12 0;
#X connect 4 0 3 1;
#X connect 5 0 3 0;
#X connect 6 0 2 0;
#X connect 6 1 4 0;
#X connect 7 0 6 0;
#X connect 9 0 0 0;
#X connect 10 0 8 0;
#X connect 11 0 10 0;
#X connect 12 0 11 0;
#X connect 12 1 10 1;
#X restore 379 81 pd tap;
#X obj 379 50 bng 25 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 321 110 nbx 5 24 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 14
-262144 -1 -1 0 256;
#X text 322 25 set reference tempo;
#X obj 321 141 s \$0-bpmref;
#X obj 175 61 r \$0-bpmchange;
#X obj 176 177 s \$0-instretch;
#X obj 23 205 s \$0-inbpmchange;
#X floatatom 23 119 5 0 0 0 - - -, f 5;
#X text 71 118 bpm change;
#N canvas 1 122 450 300 crazy-gate 0;
#X obj 40 154 *;
#X obj 40 90 t f f f;
#X obj 44 182 select 0;
#X obj 59 45 inlet;
#X obj 42 218 outlet;
#X obj 65 130 !=;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 5 1;
#X connect 1 2 5 0;
#X connect 2 1 4 0;
#X connect 3 0 1 0;
#X connect 5 0 0 1;
#X restore 23 157 pd crazy-gate;
#N canvas 1 133 450 300 crazy-gate 0;
#X obj 40 154 *;
#X obj 40 90 t f f f;
#X obj 44 182 select 0;
#X obj 59 45 inlet;
#X obj 42 218 outlet;
#X obj 64 129 !=;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 5 1;
#X connect 1 2 5 0;
#X connect 2 1 4 0;
#X connect 3 0 1 0;
#X connect 5 0 0 1;
#X restore 175 110 pd crazy-gate;
#X connect 0 0 14 0;
#X connect 1 0 0 0;
#X connect 2 0 12 0;
#X connect 4 0 8 0;
#X connect 5 0 8 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 8 0 10 0;
#X connect 11 0 17 0;
#X connect 14 0 16 0;
#X connect 16 0 13 0;
#X connect 17 0 2 0;
#X restore 603 556 pd more-stretch-tools;
#N canvas 664 376 450 300 more-shift-tools 0;
#X obj 85 176 int, f 5;
#X obj 239 56 tgl 25 0 empty \$0-semitones empty 17 7 0 10 -262144
-1 -1 0 1;
#X text 271 55 semitones;
#X obj 215 123 t b;
#X obj 86 257 s \$0-transpose;
#X obj 85 103 r \$0-dtranspose;
#X obj 85 142 f;
#X obj 189 171 - 1;
#X obj 85 216 spigot 0;
#X obj 177 215 spigot 1;
#X connect 0 0 8 0;
#X connect 1 0 3 0;
#X connect 1 0 7 0;
#X connect 1 0 8 1;
#X connect 3 0 6 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X restore 603 594 pd more-shift-tools;
#X obj 898 500 tgl 25 1 \$0-semitones empty empty 17 7 0 10 -262144
-1 -1 0 1;
#X text 931 497 semitones;
#X text 345 230 stretch;
#X text 449 231 tranpose;
#X text 872 360 reset stretch;
#X text 869 470 reset pitch;
#X text 602 468 transposition: [-24. \, +24.];
#X msg 260 179 3;
#X text 296 182 toggle loop;
#X text 529 168 stream samples from a media file \, time-stretching
and pitch-shifting the samples when playing them.;
#X text 530 209 The 'stretch' and 'transpose' parameters can be adjusted
on the fly.;
#X obj 886 421 nbx 5 24 -1e+37 1e+37 0 0 \$0-bpmchange \$0-inbpmchange
empty 0 -8 0 20 -262144 -1 -1 0 256;
#X text 22 473 Sending '2' will start playing again from start. Sending
'3' will toggle looping mode.;
#X text 23 546 When opening a file and sending a play immediately after
\, there will be a short delay while the file is being opened. The
number of samples delayed will be printed on the console.;
#X text 801 608 https://aubio.org/pd-aubio;
#X text 528 126 aubiosampler~-------------, f 13;
#X text 530 248 aubiosampler~ can be used as a replacement for readsf~
\, and should open most media files \, including video and network
resources.;
#X text 23 368 Like readsf~ \, aubiosampler~ will output a bang on
its right outlet when the file finished playing.;
#X text 185 155 play;
#X text 133 9 open a file;
#X text 616 32 play (as soon as possible);
#X text 617 57 idem \, but disabling loop mode if set;
#X msg 240 33 open drum_loop.flac \, 1;
#X msg 240 57 open music_video.webm \, 2;
#X text 615 9 load (and if a 1 was sent before \, also play);
#X text 28 35 can be a compressed file \,;
#X text 84 60 including a movie \,;
#X text 76 84 or a remote stream.;
#X obj 240 280 aubiosampler~, f 27;
#X text 616 83 loop (as soon as possible);
#X msg 240 81 open https://aubio.org/sounds/drum.ogg \, 2 \, 3;
#X msg 240 9 open /usr/share/puredata/doc/sound/voice.wav;
#X text 23 408 Sending '1' after the end of file was reached will start
playing the file again. Sending '1' before will resume playback from
where it was left off.;
#X connect 1 0 47 1;
#X connect 2 0 47 2;
#X connect 5 0 3 0;
#X connect 6 0 4 0;
#X connect 7 0 47 0;
#X connect 8 0 47 0;
#X connect 10 0 47 0;
#X connect 26 0 47 0;
#X connect 41 0 47 0;
#X connect 42 0 47 0;
#X connect 47 0 0 0;
#X connect 47 0 0 1;
#X connect 47 1 9 0;
#X connect 49 0 47 0;
#X connect 50 0 47 0;
